<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/hero.jpg"><title>webpack必懂知识 | fancy——Blog</title><meta name="description" content="关键功能">
    <link rel="preload" href="/assets/style-9be8f644.css" as="style"><link rel="stylesheet" href="/assets/style-9be8f644.css">
    <link rel="modulepreload" href="/assets/app-184d3897.js"><link rel="modulepreload" href="/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/assets/webpack必懂知识.html-582dad38.js"><link rel="modulepreload" href="/assets/webpack必懂知识.html-b14d7726.js"><link rel="prefetch" href="/assets/contributing.html-030571aa.js" as="script"><link rel="prefetch" href="/assets/index.html-17dda525.js" as="script"><link rel="prefetch" href="/assets/index.html-3677acc8.js" as="script"><link rel="prefetch" href="/assets/index.html-d03e4f14.js" as="script"><link rel="prefetch" href="/assets/浏览器相关面经.html-3f2c884d.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-3818cd9c.js" as="script"><link rel="prefetch" href="/assets/css面经.html-f0ba22c9.js" as="script"><link rel="prefetch" href="/assets/js面经.html-4034d79f.js" as="script"><link rel="prefetch" href="/assets/node面经.html-a8b8d726.js" as="script"><link rel="prefetch" href="/assets/操作系统.html-df66dab1.js" as="script"><link rel="prefetch" href="/assets/Vue面经.html-c8a4915d.js" as="script"><link rel="prefetch" href="/assets/算法.html-07f738f7.js" as="script"><link rel="prefetch" href="/assets/浏览器必备知识.html-c2033f78.js" as="script"><link rel="prefetch" href="/assets/canvas基础.html-ccd9b621.js" as="script"><link rel="prefetch" href="/assets/你不知道的css.html-fe8aef59.js" as="script"><link rel="prefetch" href="/assets/docker基础知识.html-fb632a24.js" as="script"><link rel="prefetch" href="/assets/英语单词.html-c8e6a56d.js" as="script"><link rel="prefetch" href="/assets/packageJson文件.html-587b650b.js" as="script"><link rel="prefetch" href="/assets/vite必懂知识.html-cfd98eb0.js" as="script"><link rel="prefetch" href="/assets/Vite插件开发.html-62a71ba3.js" as="script"><link rel="prefetch" href="/assets/webpack搭建Vue3ts.html-96033df3.js" as="script"><link rel="prefetch" href="/assets/包管理器的相关知识.html-dc523502.js" as="script"><link rel="prefetch" href="/assets/小程序架构.html-0bd4ea6f.js" as="script"><link rel="prefetch" href="/assets/微前端.html-b6f3c52c.js" as="script"><link rel="prefetch" href="/assets/项目初始化.html-b676bc56.js" as="script"><link rel="prefetch" href="/assets/Git基础.html-84d42c2c.js" as="script"><link rel="prefetch" href="/assets/js进阶.html-137e9f46.js" as="script"><link rel="prefetch" href="/assets/必会APIs.html-413d0023.js" as="script"><link rel="prefetch" href="/assets/linux常用指令.html-e3f8f576.js" as="script"><link rel="prefetch" href="/assets/common_apis.html-71c26cd4.js" as="script"><link rel="prefetch" href="/assets/node基础知识.html-d585391d.js" as="script"><link rel="prefetch" href="/assets/pm2.html-d2a135e2.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-fe55e02f.js" as="script"><link rel="prefetch" href="/assets/diff.html-b4bfdb21.js" as="script"><link rel="prefetch" href="/assets/fiber.html-43696bc4.js" as="script"><link rel="prefetch" href="/assets/基础.html-cf7cc6ef.js" as="script"><link rel="prefetch" href="/assets/grammar.html-0b1fb740.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-ef0690f5.js" as="script"><link rel="prefetch" href="/assets/grammar.html-dfe8dc58.js" as="script"><link rel="prefetch" href="/assets/diff.html-4e42c9ce.js" as="script"><link rel="prefetch" href="/assets/pinia.html-2aff2cc3.js" as="script"><link rel="prefetch" href="/assets/vue-loader初探.html-5f720f78.js" as="script"><link rel="prefetch" href="/assets/vue3.3版本.html-da8c5682.js" as="script"><link rel="prefetch" href="/assets/Vue3异步更新.html-1701912e.js" as="script"><link rel="prefetch" href="/assets/vueRouter.html-c13eb964.js" as="script"><link rel="prefetch" href="/assets/Vue内置组件.html-a53709fe.js" as="script"><link rel="prefetch" href="/assets/响应式原理.html-a1d11ad2.js" as="script"><link rel="prefetch" href="/assets/编译原理.html-1661b591.js" as="script"><link rel="prefetch" href="/assets/js中遇到的问题.html-0f2824aa.js" as="script"><link rel="prefetch" href="/assets/埋点.html-a4f962d7.js" as="script"><link rel="prefetch" href="/assets/pm2.html-d064e91d.js" as="script"><link rel="prefetch" href="/assets/项目中得到的问题.html-0f4fdaa3.js" as="script"><link rel="prefetch" href="/assets/好用的依赖工具包.html-6cad878f.js" as="script"><link rel="prefetch" href="/assets/js实现效果.html-4e83f5f4.js" as="script"><link rel="prefetch" href="/assets/Vuepress插件.html-f0ff1c19.js" as="script"><link rel="prefetch" href="/assets/服务器.html-c3f5c79d.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/contributing.html-c55e0bde.js" as="script"><link rel="prefetch" href="/assets/index.html-b809455c.js" as="script"><link rel="prefetch" href="/assets/index.html-587532a0.js" as="script"><link rel="prefetch" href="/assets/index.html-19169999.js" as="script"><link rel="prefetch" href="/assets/浏览器相关面经.html-64573b81.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-ab72ad07.js" as="script"><link rel="prefetch" href="/assets/css面经.html-1d62152e.js" as="script"><link rel="prefetch" href="/assets/js面经.html-e3882345.js" as="script"><link rel="prefetch" href="/assets/node面经.html-6af02d01.js" as="script"><link rel="prefetch" href="/assets/操作系统.html-d0a983c6.js" as="script"><link rel="prefetch" href="/assets/Vue面经.html-86c26fde.js" as="script"><link rel="prefetch" href="/assets/算法.html-30d0d787.js" as="script"><link rel="prefetch" href="/assets/浏览器必备知识.html-61174f97.js" as="script"><link rel="prefetch" href="/assets/canvas基础.html-c2fa4011.js" as="script"><link rel="prefetch" href="/assets/你不知道的css.html-2be2b409.js" as="script"><link rel="prefetch" href="/assets/docker基础知识.html-e8d9426b.js" as="script"><link rel="prefetch" href="/assets/英语单词.html-d40ba4b9.js" as="script"><link rel="prefetch" href="/assets/packageJson文件.html-ca73fd59.js" as="script"><link rel="prefetch" href="/assets/vite必懂知识.html-6f6ec62b.js" as="script"><link rel="prefetch" href="/assets/Vite插件开发.html-1d82af7b.js" as="script"><link rel="prefetch" href="/assets/webpack搭建Vue3ts.html-752e6a8b.js" as="script"><link rel="prefetch" href="/assets/包管理器的相关知识.html-180bc4c0.js" as="script"><link rel="prefetch" href="/assets/小程序架构.html-270f6659.js" as="script"><link rel="prefetch" href="/assets/微前端.html-2d749ba5.js" as="script"><link rel="prefetch" href="/assets/项目初始化.html-792739c7.js" as="script"><link rel="prefetch" href="/assets/Git基础.html-bc062b67.js" as="script"><link rel="prefetch" href="/assets/js进阶.html-e8db8eab.js" as="script"><link rel="prefetch" href="/assets/必会APIs.html-5debc739.js" as="script"><link rel="prefetch" href="/assets/linux常用指令.html-e6524296.js" as="script"><link rel="prefetch" href="/assets/common_apis.html-b75cb8c4.js" as="script"><link rel="prefetch" href="/assets/node基础知识.html-b5963d10.js" as="script"><link rel="prefetch" href="/assets/pm2.html-a8a9c432.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-b83cfd81.js" as="script"><link rel="prefetch" href="/assets/diff.html-74d9e8f2.js" as="script"><link rel="prefetch" href="/assets/fiber.html-72d12b50.js" as="script"><link rel="prefetch" href="/assets/基础.html-e2693ea5.js" as="script"><link rel="prefetch" href="/assets/grammar.html-53a87cb9.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-ebf07415.js" as="script"><link rel="prefetch" href="/assets/grammar.html-566b502b.js" as="script"><link rel="prefetch" href="/assets/diff.html-af60d978.js" as="script"><link rel="prefetch" href="/assets/pinia.html-1cd0bdc9.js" as="script"><link rel="prefetch" href="/assets/vue-loader初探.html-41e4d636.js" as="script"><link rel="prefetch" href="/assets/vue3.3版本.html-bd9b2dc1.js" as="script"><link rel="prefetch" href="/assets/Vue3异步更新.html-950fadab.js" as="script"><link rel="prefetch" href="/assets/vueRouter.html-c90ea306.js" as="script"><link rel="prefetch" href="/assets/Vue内置组件.html-b9233aba.js" as="script"><link rel="prefetch" href="/assets/响应式原理.html-11ec3d81.js" as="script"><link rel="prefetch" href="/assets/编译原理.html-6d1b8582.js" as="script"><link rel="prefetch" href="/assets/js中遇到的问题.html-c6fe5a0a.js" as="script"><link rel="prefetch" href="/assets/埋点.html-0d46dc90.js" as="script"><link rel="prefetch" href="/assets/pm2.html-bdd2df87.js" as="script"><link rel="prefetch" href="/assets/项目中得到的问题.html-45b3b757.js" as="script"><link rel="prefetch" href="/assets/好用的依赖工具包.html-197b7668.js" as="script"><link rel="prefetch" href="/assets/js实现效果.html-ce4fc756.js" as="script"><link rel="prefetch" href="/assets/Vuepress插件.html-eedd8fc8.js" as="script"><link rel="prefetch" href="/assets/服务器.html-1b9c302a.js" as="script"><link rel="prefetch" href="/assets/404.html-87d54bd8.js" as="script"><link rel="prefetch" href="/assets/giscus-f311b0ba.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="fancy——Blog"><span class="site-name can-hide">fancy——Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Notes/React/基础.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Vue/编译原理.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Sass/grammar.md" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/TypeScript/grammar.md" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/JavaScript/必会APIs.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Docker/docker基础知识.md" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Linux/linux常用指令.md" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Css/你不知道的css.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Canvas/canvas基础.md" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/FrontEndEngineering/项目初始化.md" class="" aria-label="FrontEndEngineering"><!--[--><!--]--> FrontEndEngineering <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Optimize/性能优化.md" class="" aria-label="Optimize"><!--[--><!--]--> Optimize <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/English/英语单词.md" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Git/Git基础.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Browser/浏览器必备知识.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Algorithms/算法.md" class="" aria-label="Algorithms"><!--[--><!--]--> Algorithms <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Server/Nginx.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Problems/Server/服务器.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/JavaScript/埋点.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Project/项目中得到的问题.md" class="" aria-label="Project"><!--[--><!--]--> Project <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面经"><span class="title">面经</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面经"><span class="title">面经</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Interview/Node/node面经.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/ComputerNetwork/计算机网络.md" class="" aria-label="ComputerNetwork"><!--[--><!--]--> ComputerNetwork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/JavaScript/js面经.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Css/css面经.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Vue/Vue面经.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Browser/浏览器相关面经.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/OS/操作系统.md" class="" aria-label="OS"><!--[--><!--]--> OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Utils/Vuepress/Vuepress插件.md" class="" aria-label="Vuepress"><!--[--><!--]--> Vuepress <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/NodeDependency/好用的依赖工具包.md" class="" aria-label="NodeDependency"><!--[--><!--]--> NodeDependency <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/SpecialEffects/js实现效果.md" class="" aria-label="SpecialEffects"><!--[--><!--]--> SpecialEffects <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索关键词" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Notes/React/基础.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Vue/编译原理.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Sass/grammar.md" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/TypeScript/grammar.md" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/JavaScript/必会APIs.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Docker/docker基础知识.md" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Linux/linux常用指令.md" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Css/你不知道的css.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Canvas/canvas基础.md" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/FrontEndEngineering/项目初始化.md" class="" aria-label="FrontEndEngineering"><!--[--><!--]--> FrontEndEngineering <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Optimize/性能优化.md" class="" aria-label="Optimize"><!--[--><!--]--> Optimize <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/English/英语单词.md" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Git/Git基础.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Browser/浏览器必备知识.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Algorithms/算法.md" class="" aria-label="Algorithms"><!--[--><!--]--> Algorithms <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Server/Nginx.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Problems/Server/服务器.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/JavaScript/埋点.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Project/项目中得到的问题.md" class="" aria-label="Project"><!--[--><!--]--> Project <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面经"><span class="title">面经</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面经"><span class="title">面经</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Interview/Node/node面经.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/ComputerNetwork/计算机网络.md" class="" aria-label="ComputerNetwork"><!--[--><!--]--> ComputerNetwork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/JavaScript/js面经.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Css/css面经.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Vue/Vue面经.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Browser/浏览器相关面经.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/OS/操作系统.md" class="" aria-label="OS"><!--[--><!--]--> OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Utils/Vuepress/Vuepress插件.md" class="" aria-label="Vuepress"><!--[--><!--]--> Vuepress <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/NodeDependency/好用的依赖工具包.md" class="" aria-label="NodeDependency"><!--[--><!--]--> NodeDependency <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/SpecialEffects/js实现效果.md" class="" aria-label="SpecialEffects"><!--[--><!--]--> SpecialEffects <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">FrontEndEngineering <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Notes/FrontEndEngineering/webpack%E6%90%AD%E5%BB%BAVue3ts.html" class="sidebar-item" aria-label="Webpack搭建Vue3ts"><!--[--><!--]--> Webpack搭建Vue3ts <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/vite%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html" class="sidebar-item" aria-label="vite必懂知识"><!--[--><!--]--> vite必懂知识 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="webpack必懂知识"><!--[--><!--]--> webpack必懂知识 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_1-打包原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.打包原理"><!--[--><!--]--> 1.打包原理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_1-1、初始化阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1、初始化阶段"><!--[--><!--]--> 1.1、初始化阶段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_1-2、构建阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2、构建阶段"><!--[--><!--]--> 1.2、构建阶段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_1-3、生成阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3、生成阶段"><!--[--><!--]--> 1.3、生成阶段 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_2-如何实现的分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.如何实现的分包"><!--[--><!--]--> 2.如何实现的分包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_3-webpack的缓存机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.webpack的缓存机制"><!--[--><!--]--> 3.webpack的缓存机制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_3-loader和plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.loader和plugin"><!--[--><!--]--> 3.loader和plugin <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_3-1、plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1、plugin"><!--[--><!--]--> 3.1、plugin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/FrontEndEngineering/webpack%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html#_3-2、loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2、loader"><!--[--><!--]--> 3.2、loader <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/Notes/FrontEndEngineering/Vite%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.html" class="sidebar-item" aria-label="Vite插件开发"><!--[--><!--]--> Vite插件开发 <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/packageJson%E6%96%87%E4%BB%B6.html" class="sidebar-item" aria-label="packageJson文件"><!--[--><!--]--> packageJson文件 <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86.html" class="sidebar-item" aria-label="包管理器的相关知识"><!--[--><!--]--> 包管理器的相关知识 <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/%E5%BE%AE%E5%89%8D%E7%AB%AF.html" class="sidebar-item" aria-label="微前端"><!--[--><!--]--> 微前端 <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%9E%B6%E6%9E%84.html" class="sidebar-item" aria-label="小程序架构"><!--[--><!--]--> 小程序架构 <!--[--><!--]--></a><!----></li><li><a href="/Notes/FrontEndEngineering/%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.html" class="sidebar-item" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="webpack必懂知识" tabindex="-1"><a class="header-anchor" href="#webpack必懂知识" aria-hidden="true">#</a> webpack必懂知识</h1><h2 id="_1-打包原理" tabindex="-1"><a class="header-anchor" href="#_1-打包原理" aria-hidden="true">#</a> 1.打包原理</h2><p><img src="/Webpack/webpack1.png" alt=""></p><p>打包的步骤</p><p>1.初始化阶段：</p><ol><li><strong>初始化参数</strong>：从配置文件、 配置对象、Shell 参数中读取，与默认配置结合得出最终的参数</li><li><strong>创建编译器对象</strong>：用上一步得到的参数创建 <code>Compiler</code> 对象</li><li><strong>初始化编译环境</strong>：包括注入内置插件、注册各种模块工厂、初始化 RuleSet 集合、加载配置的插件等</li><li><strong>开始编译</strong>：执行 <code>compiler</code> 对象的 <code>run</code> 方法</li><li><strong>确定入口</strong>：根据配置中的 <code>entry</code> 找出所有的入口文件，调用 <code>compilition.addEntry</code> 将入口文件转换为 <code>dependence</code> 对象</li></ol><p>2.构建阶段：</p><ol><li><strong>编译模块(make)</strong>：根据 <code>entry</code> 对应的 <code>dependence</code> 创建 <code>module</code> 对象，调用 <code>loader</code> 将模块转译为标准 JS 内容，调用 JS 解释器将内容转换为 AST 对象，从中找出该模块依赖的模块，再 递归 本步骤直到所有入口依赖的文件都经过了本步骤的处理</li><li><strong>完成模块编译</strong>：上一步递归处理所有能触达到的模块后，得到了每个模块被翻译后的内容以及它们之间的 <strong>依赖关系图</strong></li></ol><p>3.生成阶段：</p><ol><li><strong>输出资源(seal)</strong>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 <code>Chunk</code>，再把每个 <code>Chunk</code> 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会</li><li><strong>写入文件系统(emitAssets)</strong>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ol><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><code>Entry</code>：编译入口，webpack 编译的起点</p><p><code>Compiler</code>：编译管理器，webpack 启动后会创建 <code>compiler</code> 对象，该对象一直存活知道结束退出</p><p><code>Compilation</code>：单次编辑过程的管理器，比如 <code>watch = true</code> 时，运行过程中只有一个 <code>compiler</code> 但每次文件变更触发重新编译时，都会创建一个新的 <code>compilation</code> 对象</p><p><code>Dependence</code>：依赖对象，webpack 基于该类型记录模块间依赖关系</p><p><code>Module</code>：webpack 内部所有资源都会以“module”对象形式存在，所有关于资源的操作、转译、合并都是以 “module” 为基本单位进行的</p><p><code>Chunk</code>：编译完成准备输出时，webpack 会将 <code>module</code> 按特定的规则组织成一个一个的 <code>chunk</code>，这些 <code>chunk</code> 某种程度上跟最终输出一一对应</p><p><code>Loader</code>：资源内容转换器，其实就是实现从内容 A 转换 B 的转换器</p><p><code>Plugin</code>：webpack构建过程中，会在特定的时机广播对应的事件，插件监听这些事件，在特定时间点介入编译过程</p></div><h3 id="_1-1、初始化阶段" tabindex="-1"><a class="header-anchor" href="#_1-1、初始化阶段" aria-hidden="true">#</a> 1.1、初始化阶段</h3><p>初始化阶段会做哪些？</p><p>将 <code>process.args + webpack.config.js</code> 合并成用户配置</p><p>调用 <code>validateSchema</code> 校验配置</p><p>调用 <code>getNormalizedWebpackOptions + applyWebpackOptionsBaseDefaults</code> 合并出最终配置</p><p>创建 <code>compiler</code> 对象</p><p>遍历用户定义的 <code>plugins</code> 集合，执行插件的 <code>apply</code> 方法</p><p>调用 <code>new WebpackOptionsApply().process</code> 方法，加载各种内置插件</p><h3 id="_1-2、构建阶段" tabindex="-1"><a class="header-anchor" href="#_1-2、构建阶段" aria-hidden="true">#</a> 1.2、构建阶段</h3><p>构建阶段从 <code>entry</code> 开始递归解析资源与资源的依赖，在 <code>compilation</code> 对象内逐步构建出 <code>module</code> 集合以及 <code>module</code> 之间的依赖关系</p><p>调用 <code>handleModuleCreate</code> ，根据文件类型构建 <code>module</code> 子类</p><p>调用 <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Floader-runner" target="_blank" rel="noopener noreferrer">loader-runner<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 仓库的 <code>runLoaders</code> 转译 <code>module</code> 内容，通常是从各类资源类型转译为 JavaScript 文本</p><p>调用 <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Facorn" target="_blank" rel="noopener noreferrer">acorn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 将 JS 文本解析为AST</p><p>遍历 AST，触发各种钩子</p><ol><li>在 <code>HarmonyExportDependencyParserPlugin</code> 插件监听 <code>exportImportSpecifier</code> 钩子，解读 JS 文本对应的资源依赖</li><li>调用 <code>module</code> 对象的 <code>addDependency</code> 将依赖对象加入到 <code>module</code> 依赖列表中</li></ol><p>AST 遍历完毕后，调用 <code>module.handleParseResult</code> 处理模块依赖</p><p>对于 <code>module</code> 新增的依赖，调用 <code>handleModuleCreate</code> ，控制流回到第一步</p><p>所有依赖都解析完毕后，构建阶段结束</p><p>总结如下-》</p><ul><li>构建阶段会读取源码，解析为 AST 集合。</li><li>Webpack 读出 AST 之后仅遍历 AST 集合；babel 则对源码做等价转换</li><li>Webpack 遍历 AST 集合过程中，识别 <code>require/ import</code> 之类的导入语句，确定模块对其他资源的依赖关系</li></ul><h3 id="_1-3、生成阶段" tabindex="-1"><a class="header-anchor" href="#_1-3、生成阶段" aria-hidden="true">#</a> 1.3、生成阶段</h3><p>开始执行 <code>compilation.seal</code> 函数：完成从 <code>module</code> 到 <code>chunks</code> 的转化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>javascript复制代码<span class="token comment">// 取自 webpack/lib/compiler.js </span>
<span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">newCompilationParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeCompile<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token keyword">const</span> compilation <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">newCompilation</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>make<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>finishMake<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// ...</span>
          process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            compilation<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token operator">**</span>compilation<span class="token punctuation">.</span>seal<span class="token operator">**</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-如何实现的分包" tabindex="-1"><a class="header-anchor" href="#_2-如何实现的分包" aria-hidden="true">#</a> 2.如何实现的分包</h2><h2 id="_3-webpack的缓存机制" tabindex="-1"><a class="header-anchor" href="#_3-webpack的缓存机制" aria-hidden="true">#</a> 3.webpack的缓存机制</h2><h2 id="_3-loader和plugin" tabindex="-1"><a class="header-anchor" href="#_3-loader和plugin" aria-hidden="true">#</a> 3.loader和plugin</h2><h3 id="_3-1、plugin" tabindex="-1"><a class="header-anchor" href="#_3-1、plugin" aria-hidden="true">#</a> 3.1、plugin</h3><p>插件通常是一个带有 <code>apply</code> 函数的类：<code>apply</code> 函数运行时会得到参数 <code>compiler</code> ，以此为起点可以调用 <code>hook</code> 对象注册各种钩子回调，例如： <code>compiler.hooks.make.tapAsync</code> ，这里面 <code>make</code> 是钩子名称，<code>tapAsync</code> 定义了钩子的调用方式，webpack 的插件架构基于这种模式构建而成，插件开发者可以使用这种模式在钩子回调中，插入特定代码。webpack 各种内置对象都带有 <code>hooks</code> 属性，比如 <code>compilation</code> 对象：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">SomePlugin</span> <span class="token punctuation">{</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>常用的钩子</p><p><code>compiler.hooks.compilation</code> ：</p><ul><li>时机：启动编译创建出 compilation 对象后触发</li><li>参数：当前编译的 compilation 对象</li><li>示例：很多插件基于此事件获取 compilation 实例</li></ul><p><code>compiler.hooks.make</code>：</p><ul><li>时机：正式开始编译时触发</li><li>参数：同样是当前编译的 <code>compilation</code> 对象</li><li>示例：webpack 内置的 <code>EntryPlugin</code> 基于此钩子实现 <code>entry</code> 模块的初始化</li></ul><p><code>compilation.hooks.optimizeChunks</code> ：</p><ul><li>时机： <code>seal</code> 函数中，<code>chunk</code> 集合构建完毕后触发</li><li>参数：<code>chunks</code> 集合与 <code>chunkGroups</code> 集合</li><li>示例： <code>SplitChunksPlugin</code> 插件基于此钩子实现 <code>chunk</code> 拆分优化</li></ul><p><code>compiler.hooks.done</code>：</p><ul><li>时机：编译完成后触发</li><li>参数： <code>stats</code> 对象，包含编译过程中的各类统计信息</li><li>示例： <code>webpack-bundle-analyzer</code> 插件基于此钩子实现打包分析</li></ul><h3 id="_3-2、loader" tabindex="-1"><a class="header-anchor" href="#_3-2、loader" aria-hidden="true">#</a> 3.2、loader</h3><p>loader 用于对模块的源代码进行转换。loader 可以使你在 <code>import</code> 或 &quot;load(加载)&quot; 模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的得力方式。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 <code>import</code> CSS 文件！</p><p>loader 的职责不外乎是将内容 A 转化为内容 B，但是在具体用法层面还挺多讲究的，有 pitch、pre、post、inline 等概念用于应对各种场景。</p><p><strong>1.loader的配置</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;ts-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.loader的执行顺序</strong></p><ul><li>相同优先级的 loader 执行顺序为：<code>从右到左，从下到上</code>。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.loader结构</strong></p><p>当只有一个 loader 应用于资源文件时，它接收源码作为参数，输出转换后的 js 代码。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loader</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pitch" tabindex="-1"><a class="header-anchor" href="#pitch" aria-hidden="true">#</a> pitch</h4><p><code>pitch</code> 是 loader 上的一个方法，它的作用是阻断 loader 链。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// loaders/simple-loader-with-pitch.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">loader</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;normal excution&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
loader<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;pitching graph&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// loader上的pitch方法，非必须</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack 会先从左到右执行 loader 链中的每个 loader 上的 pitch 方法（如果有），然后再从右到左执行 loader 链中的每个 loader 上的普通 loader 方法。在这个过程中如果任何 pitch 有返回值，则 loader 链被阻断。webpack 会跳过后面所有的的 pitch 和 loader，直接进入上一个 loader 去执行。</p><p><img src="/Webpack/loader.png" alt=""></p><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Notes/FrontEndEngineering/vite%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86.html" class="" aria-label="vite必懂知识"><!--[--><!--]--> vite必懂知识 <!--[--><!--]--></a></span><span class="next"><a href="/Notes/FrontEndEngineering/Vite%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.html" class="" aria-label="Vite插件开发"><!--[--><!--]--> Vite插件开发 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-184d3897.js" defer></script>
  </body>
</html>
