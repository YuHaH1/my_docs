<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/hero.jpg"><title>vue-loader初探 | fancy——Blog</title><meta name="description" content="关键功能">
    <link rel="preload" href="/assets/style-9be8f644.css" as="style"><link rel="stylesheet" href="/assets/style-9be8f644.css">
    <link rel="modulepreload" href="/assets/app-392a8034.js"><link rel="modulepreload" href="/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/assets/vue-loader初探.html-41e4d636.js"><link rel="modulepreload" href="/assets/vue-loader初探.html-ff79b298.js"><link rel="prefetch" href="/assets/contributing.html-030571aa.js" as="script"><link rel="prefetch" href="/assets/index.html-1e96e632.js" as="script"><link rel="prefetch" href="/assets/index.html-3677acc8.js" as="script"><link rel="prefetch" href="/assets/index.html-d03e4f14.js" as="script"><link rel="prefetch" href="/assets/浏览器相关面经.html-4be1453d.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-2a0b8828.js" as="script"><link rel="prefetch" href="/assets/css面经.html-ba8e8181.js" as="script"><link rel="prefetch" href="/assets/js面经.html-75b3a0d6.js" as="script"><link rel="prefetch" href="/assets/node面经.html-a8b8d726.js" as="script"><link rel="prefetch" href="/assets/操作系统.html-1e709293.js" as="script"><link rel="prefetch" href="/assets/Vue面经.html-abe1dbd7.js" as="script"><link rel="prefetch" href="/assets/CSS相关问题.html-62d7ebe1.js" as="script"><link rel="prefetch" href="/assets/js中遇到的问题.html-bbd6bccb.js" as="script"><link rel="prefetch" href="/assets/埋点.html-f23b45f4.js" as="script"><link rel="prefetch" href="/assets/pm2.html-d064e91d.js" as="script"><link rel="prefetch" href="/assets/项目中得到的问题.html-70d347bc.js" as="script"><link rel="prefetch" href="/assets/服务器.html-f080f7ca.js" as="script"><link rel="prefetch" href="/assets/算法.html-d212306f.js" as="script"><link rel="prefetch" href="/assets/浏览器必备知识.html-dbbd7c35.js" as="script"><link rel="prefetch" href="/assets/canvas基础.html-ccd9b621.js" as="script"><link rel="prefetch" href="/assets/你不知道的css.html-fe8aef59.js" as="script"><link rel="prefetch" href="/assets/英语单词.html-3f856c95.js" as="script"><link rel="prefetch" href="/assets/docker基础知识.html-fb632a24.js" as="script"><link rel="prefetch" href="/assets/packageJson文件.html-4ca630f4.js" as="script"><link rel="prefetch" href="/assets/rollup.html-51526753.js" as="script"><link rel="prefetch" href="/assets/vite必懂知识.html-e3cfeea3.js" as="script"><link rel="prefetch" href="/assets/Vite插件开发.html-6ca93604.js" as="script"><link rel="prefetch" href="/assets/webpack必懂知识.html-2f0ae04b.js" as="script"><link rel="prefetch" href="/assets/webpack搭建Vue3ts.html-8dc59016.js" as="script"><link rel="prefetch" href="/assets/包管理器的相关知识.html-75a8892b.js" as="script"><link rel="prefetch" href="/assets/单元测试.html-6cfe1a26.js" as="script"><link rel="prefetch" href="/assets/小程序架构.html-72517770.js" as="script"><link rel="prefetch" href="/assets/微前端.html-17d33c10.js" as="script"><link rel="prefetch" href="/assets/项目初始化.html-6c0804df.js" as="script"><link rel="prefetch" href="/assets/Git基础.html-ed5a50f2.js" as="script"><link rel="prefetch" href="/assets/js进阶.html-db1f9c6b.js" as="script"><link rel="prefetch" href="/assets/必会APIs.html-dadd5da3.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-5b83a3c0.js" as="script"><link rel="prefetch" href="/assets/linux常用指令.html-e3f8f576.js" as="script"><link rel="prefetch" href="/assets/common_apis.html-7c104542.js" as="script"><link rel="prefetch" href="/assets/node基础知识.html-15d43448.js" as="script"><link rel="prefetch" href="/assets/pm2.html-d2a135e2.js" as="script"><link rel="prefetch" href="/assets/diff.html-b4bfdb21.js" as="script"><link rel="prefetch" href="/assets/fiber.html-dc1d157b.js" as="script"><link rel="prefetch" href="/assets/React状态管理.html-de630eea.js" as="script"><link rel="prefetch" href="/assets/基础.html-702bdd16.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-30d0e182.js" as="script"><link rel="prefetch" href="/assets/grammar.html-c24c1bfa.js" as="script"><link rel="prefetch" href="/assets/grammar.html-dfe8dc58.js" as="script"><link rel="prefetch" href="/assets/类型体操.html-51735172.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-1a8d4023.js" as="script"><link rel="prefetch" href="/assets/diff.html-b111924d.js" as="script"><link rel="prefetch" href="/assets/pinia.html-60f42df2.js" as="script"><link rel="prefetch" href="/assets/vue3.3版本.html-eaf88f1e.js" as="script"><link rel="prefetch" href="/assets/Vue3异步更新.html-9ebfd899.js" as="script"><link rel="prefetch" href="/assets/vueRouter.html-25454183.js" as="script"><link rel="prefetch" href="/assets/Vue内置组件.html-90796844.js" as="script"><link rel="prefetch" href="/assets/Vue生命周期.html-62ff3662.js" as="script"><link rel="prefetch" href="/assets/响应式原理.html-d7d9bfd0.js" as="script"><link rel="prefetch" href="/assets/编译原理.html-3fcebf33.js" as="script"><link rel="prefetch" href="/assets/好用的依赖工具包.html-f243434f.js" as="script"><link rel="prefetch" href="/assets/js实现效果.html-0a172eb5.js" as="script"><link rel="prefetch" href="/assets/Vuepress插件.html-f0ff1c19.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/contributing.html-c55e0bde.js" as="script"><link rel="prefetch" href="/assets/index.html-b809455c.js" as="script"><link rel="prefetch" href="/assets/index.html-587532a0.js" as="script"><link rel="prefetch" href="/assets/index.html-19169999.js" as="script"><link rel="prefetch" href="/assets/浏览器相关面经.html-64573b81.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-72c2f0e6.js" as="script"><link rel="prefetch" href="/assets/css面经.html-1d62152e.js" as="script"><link rel="prefetch" href="/assets/js面经.html-58ad7490.js" as="script"><link rel="prefetch" href="/assets/node面经.html-6af02d01.js" as="script"><link rel="prefetch" href="/assets/操作系统.html-d0a983c6.js" as="script"><link rel="prefetch" href="/assets/Vue面经.html-86c26fde.js" as="script"><link rel="prefetch" href="/assets/CSS相关问题.html-8cc29a58.js" as="script"><link rel="prefetch" href="/assets/js中遇到的问题.html-98a0897b.js" as="script"><link rel="prefetch" href="/assets/埋点.html-0d46dc90.js" as="script"><link rel="prefetch" href="/assets/pm2.html-bdd2df87.js" as="script"><link rel="prefetch" href="/assets/项目中得到的问题.html-a7c61889.js" as="script"><link rel="prefetch" href="/assets/服务器.html-1b9c302a.js" as="script"><link rel="prefetch" href="/assets/算法.html-17dbc820.js" as="script"><link rel="prefetch" href="/assets/浏览器必备知识.html-61174f97.js" as="script"><link rel="prefetch" href="/assets/canvas基础.html-c2fa4011.js" as="script"><link rel="prefetch" href="/assets/你不知道的css.html-2be2b409.js" as="script"><link rel="prefetch" href="/assets/英语单词.html-d40ba4b9.js" as="script"><link rel="prefetch" href="/assets/docker基础知识.html-e8d9426b.js" as="script"><link rel="prefetch" href="/assets/packageJson文件.html-087de240.js" as="script"><link rel="prefetch" href="/assets/rollup.html-c2cc64ab.js" as="script"><link rel="prefetch" href="/assets/vite必懂知识.html-294281a3.js" as="script"><link rel="prefetch" href="/assets/Vite插件开发.html-1d82af7b.js" as="script"><link rel="prefetch" href="/assets/webpack必懂知识.html-c835aa03.js" as="script"><link rel="prefetch" href="/assets/webpack搭建Vue3ts.html-afd33470.js" as="script"><link rel="prefetch" href="/assets/包管理器的相关知识.html-180bc4c0.js" as="script"><link rel="prefetch" href="/assets/单元测试.html-ca5a0537.js" as="script"><link rel="prefetch" href="/assets/小程序架构.html-270f6659.js" as="script"><link rel="prefetch" href="/assets/微前端.html-2d749ba5.js" as="script"><link rel="prefetch" href="/assets/项目初始化.html-792739c7.js" as="script"><link rel="prefetch" href="/assets/Git基础.html-bc062b67.js" as="script"><link rel="prefetch" href="/assets/js进阶.html-4dbeaf66.js" as="script"><link rel="prefetch" href="/assets/必会APIs.html-571a7e82.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-dccfee5b.js" as="script"><link rel="prefetch" href="/assets/linux常用指令.html-e6524296.js" as="script"><link rel="prefetch" href="/assets/common_apis.html-b75cb8c4.js" as="script"><link rel="prefetch" href="/assets/node基础知识.html-b5963d10.js" as="script"><link rel="prefetch" href="/assets/pm2.html-a8a9c432.js" as="script"><link rel="prefetch" href="/assets/diff.html-74d9e8f2.js" as="script"><link rel="prefetch" href="/assets/fiber.html-2dcae9b7.js" as="script"><link rel="prefetch" href="/assets/React状态管理.html-6b55035d.js" as="script"><link rel="prefetch" href="/assets/基础.html-a7bf4161.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-3cf714c3.js" as="script"><link rel="prefetch" href="/assets/grammar.html-53a87cb9.js" as="script"><link rel="prefetch" href="/assets/grammar.html-566b502b.js" as="script"><link rel="prefetch" href="/assets/类型体操.html-bea747cf.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-ebf07415.js" as="script"><link rel="prefetch" href="/assets/diff.html-af60d978.js" as="script"><link rel="prefetch" href="/assets/pinia.html-1cd0bdc9.js" as="script"><link rel="prefetch" href="/assets/vue3.3版本.html-bd9b2dc1.js" as="script"><link rel="prefetch" href="/assets/Vue3异步更新.html-950fadab.js" as="script"><link rel="prefetch" href="/assets/vueRouter.html-c90ea306.js" as="script"><link rel="prefetch" href="/assets/Vue内置组件.html-b9233aba.js" as="script"><link rel="prefetch" href="/assets/Vue生命周期.html-e8a7ec53.js" as="script"><link rel="prefetch" href="/assets/响应式原理.html-aed14e50.js" as="script"><link rel="prefetch" href="/assets/编译原理.html-6d1b8582.js" as="script"><link rel="prefetch" href="/assets/好用的依赖工具包.html-b80487be.js" as="script"><link rel="prefetch" href="/assets/js实现效果.html-ce4fc756.js" as="script"><link rel="prefetch" href="/assets/Vuepress插件.html-eedd8fc8.js" as="script"><link rel="prefetch" href="/assets/404.html-87d54bd8.js" as="script"><link rel="prefetch" href="/assets/giscus-f311b0ba.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="fancy——Blog"><span class="site-name can-hide">fancy——Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Notes/React/基础.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Vue/编译原理.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Sass/grammar.md" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/TypeScript/类型体操.md" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/JavaScript/设计模式.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Docker/docker基础知识.md" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Linux/linux常用指令.md" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Css/你不知道的css.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Canvas/canvas基础.md" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/FrontEndEngineering/项目初始化.md" class="" aria-label="FrontEndEngineering"><!--[--><!--]--> FrontEndEngineering <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Optimize/性能优化.md" class="" aria-label="Optimize"><!--[--><!--]--> Optimize <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/English/英语单词.md" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Git/Git基础.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Browser/浏览器必备知识.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Algorithms/算法.md" class="" aria-label="Algorithms"><!--[--><!--]--> Algorithms <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Server/Nginx.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Problems/Server/服务器.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/JavaScript/埋点.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Project/项目中得到的问题.md" class="" aria-label="Project"><!--[--><!--]--> Project <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Css/CSS相关问题.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面经"><span class="title">面经</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面经"><span class="title">面经</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Interview/Node/node面经.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/ComputerNetwork/计算机网络.md" class="" aria-label="ComputerNetwork"><!--[--><!--]--> ComputerNetwork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/JavaScript/js面经.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Css/css面经.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Vue/Vue面经.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Browser/浏览器相关面经.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/OS/操作系统.md" class="" aria-label="OS"><!--[--><!--]--> OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Utils/Vuepress/Vuepress插件.md" class="" aria-label="Vuepress"><!--[--><!--]--> Vuepress <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/NodeDependency/好用的依赖工具包.md" class="" aria-label="NodeDependency"><!--[--><!--]--> NodeDependency <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/SpecialEffects/js实现效果.md" class="" aria-label="SpecialEffects"><!--[--><!--]--> SpecialEffects <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="个人信息"><span class="title">个人信息</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="个人信息"><span class="title">个人信息</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/YuHaH1" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://blog.csdn.net/m0_47195133?type=blog" rel="noopener noreferrer" target="_blank" aria-label="CSDN"><!--[--><!--]--> CSDN <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索关键词" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记查询"><span class="title">笔记查询</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Notes/React/基础.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Vue/编译原理.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Sass/grammar.md" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/TypeScript/类型体操.md" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/JavaScript/设计模式.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Docker/docker基础知识.md" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Linux/linux常用指令.md" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Css/你不知道的css.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Canvas/canvas基础.md" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/FrontEndEngineering/项目初始化.md" class="" aria-label="FrontEndEngineering"><!--[--><!--]--> FrontEndEngineering <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Optimize/性能优化.md" class="" aria-label="Optimize"><!--[--><!--]--> Optimize <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/English/英语单词.md" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Git/Git基础.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Browser/浏览器必备知识.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Algorithms/算法.md" class="" aria-label="Algorithms"><!--[--><!--]--> Algorithms <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Notes/Server/Nginx.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="问题记录"><span class="title">问题记录</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Problems/Server/服务器.md" class="" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/JavaScript/埋点.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Project/项目中得到的问题.md" class="" aria-label="Project"><!--[--><!--]--> Project <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Node/pm2.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Problems/Css/CSS相关问题.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面经"><span class="title">面经</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面经"><span class="title">面经</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Interview/Node/node面经.md" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/ComputerNetwork/计算机网络.md" class="" aria-label="ComputerNetwork"><!--[--><!--]--> ComputerNetwork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/JavaScript/js面经.md" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Css/css面经.md" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Vue/Vue面经.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/Browser/浏览器相关面经.md" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Interview/OS/操作系统.md" class="" aria-label="OS"><!--[--><!--]--> OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="不错的工具"><span class="title">不错的工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/Utils/Vuepress/Vuepress插件.md" class="" aria-label="Vuepress"><!--[--><!--]--> Vuepress <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/NodeDependency/好用的依赖工具包.md" class="" aria-label="NodeDependency"><!--[--><!--]--> NodeDependency <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/Utils/SpecialEffects/js实现效果.md" class="" aria-label="SpecialEffects"><!--[--><!--]--> SpecialEffects <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="个人信息"><span class="title">个人信息</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="个人信息"><span class="title">个人信息</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/YuHaH1" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://blog.csdn.net/m0_47195133?type=blog" rel="noopener noreferrer" target="_blank" aria-label="CSDN"><!--[--><!--]--> CSDN <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Vue <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Notes/Vue/diff.html" class="sidebar-item" aria-label="diff"><!--[--><!--]--> diff <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/vueRouter.html" class="sidebar-item" aria-label="vueRouter"><!--[--><!--]--> vueRouter <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/vue3.3%E7%89%88%E6%9C%AC.html" class="sidebar-item" aria-label="vue3.3"><!--[--><!--]--> vue3.3 <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/pinia.html" class="sidebar-item" aria-label="pinia"><!--[--><!--]--> pinia <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.html" class="sidebar-item" aria-label="响应式原理"><!--[--><!--]--> 响应式原理 <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.html" class="sidebar-item" aria-label="编译原理"><!--[--><!--]--> 编译原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/Vue/vue-loader%E5%88%9D%E6%8E%A2.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="vue-loader初探"><!--[--><!--]--> vue-loader初探 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/Vue/vue-loader%E5%88%9D%E6%8E%A2.html#_1-vue-loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.vue-loader"><!--[--><!--]--> 1.vue-loader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/Vue/vue-loader%E5%88%9D%E6%8E%A2.html#_2-vueloaderplugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.VueLoaderPlugin"><!--[--><!--]--> 2.VueLoaderPlugin <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Notes/Vue/Vue3%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0.html" class="sidebar-item" aria-label="Vue3异步更新"><!--[--><!--]--> Vue3异步更新 <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/Vue%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6.html" class="sidebar-item" aria-label="Vue内置组件"><!--[--><!--]--> Vue内置组件 <!--[--><!--]--></a><!----></li><li><a href="/Notes/Vue/Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" class="sidebar-item" aria-label="Vue生命周期"><!--[--><!--]--> Vue生命周期 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="vue-loader初探" tabindex="-1"><a class="header-anchor" href="#vue-loader初探" aria-hidden="true">#</a> vue-loader初探</h1><h2 id="_1-vue-loader" tabindex="-1"><a class="header-anchor" href="#_1-vue-loader" aria-hidden="true">#</a> 1.vue-loader</h2><p>vue-loader使用vue/complier-sfc包中的compiler来解析模板、脚本和样式，</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue/complier-sfc&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> loaderContext <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>context<span class="token punctuation">,</span>resourcePath<span class="token punctuation">,</span>resourceQuery<span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>descriptor<span class="token punctuation">}</span> <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token comment">//descriptor描述是一个解析后的对象</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>script<span class="token punctuation">}</span> <span class="token operator">=</span> descriptor
    <span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> stringifyRequest <span class="token operator">=</span> loaderContext<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">contextify</span><span class="token punctuation">(</span>
   		context<span class="token punctuation">,</span>
        resourcePath<span class="token operator">+</span>resourceQuery
    <span class="token punctuation">)</span>
    srcipt <span class="token operator">&amp;&amp;</span> code<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>`<span class="token keyword">import</span> script from $<span class="token punctuation">{</span><span class="token punctuation">}</span>`<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token keyword">this</span><span class="token operator">:</span> webpack<span class="token punctuation">.</span>loader<span class="token punctuation">.</span>LoaderContext<span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> string</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> loaderContext <span class="token operator">=</span> <span class="token keyword">this</span>
   <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span> 
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vueloader做了什么：</p><ol><li><p>如果VueLoaderPlugin插件没有安装的情况下报错，==这个插件动态的添加loader处理从vue文件分割出来的js html css代码==</p><ol><li><img src="/Vue/vueloader1.png" alt=""></li><li>pitcher处理js 其他的处理html css，最终重新定义loader的rules</li></ol></li><li><p>得出请求的路径 例如 import APP from &#39;./APP.vue&#39; ./APP.vue</p></li><li><p>取出参数</p></li><li><p>环境判断 生产环境？ node环境？</p></li><li><p>解析内容将 vue文件 模板 脚本 样式拆分成对象放到descriptor中</p></li><li><p>MAP结构缓存描述符</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fs <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> SFCDescriptor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue/compiler-sfc&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue/compiler-sfc&#39;</span>

<span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> SFCDescriptor<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setDescriptor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filename</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">entry</span><span class="token operator">:</span> SFCDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">cleanQuery</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getDescriptor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filename</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> SFCDescriptor <span class="token punctuation">{</span>
  filename <span class="token operator">=</span> <span class="token function">cleanQuery</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token operator">!</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> source <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> descriptor <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">,</span>
    <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
  <span class="token keyword">return</span> descriptor
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">cleanQuery</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">str</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> i <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;?&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> str
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>getDescriptor这个函数只会在描述符之后调用，如果没有命中cache缓存可能是由于加载器在单独的线程中运行。处理这件事唯一办法直接从磁盘读取该文件</p></li></ol></li><li><p>拿文件路径并生成hash作为id-》热重载 当文件内容变化重新生成新的hash</p></li><li><p>查看是否包含scoped已经热重载功能是否需要 。（生产环境node或者选项hotReload=false都不需要以及这三个条件其中一个为真descriptor.script || descriptor.scriptSetup || descriptor.template）</p></li><li><p>const propsToAttach: [string, string][] = [] 定义变量，给脚本添加额外属性来为Tree-shaking做准备</p></li><li><p>分割vue文件 script template style，提取参数。</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?vue&amp;type=script</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrsQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resourceQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
   <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?vue&amp;type=template</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scopedQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tsQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrsQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resourceQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?vue&amp;type=style&amp;index=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>inlineQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attrsQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resourceQuery<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>将生成的hash id放到css元素上</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>hasScoped<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   propsToAttach<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__scopeId</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;data-v-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>暴漏文件名利于devtools工具</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Expose filename. This is used by the devtools and Vue runtime warnings.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isProduction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Expose the file&#39;s full path in development, so that it can be opened</span>
    <span class="token comment">// from the devtools.</span>
     <span class="token comment">//开发环境下暴露文件的全路径，以便于可以从开发工具中直接打开该文件</span>
    propsToAttach<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__file</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>rawShortFilePath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>exposeFilename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">//生产环境，库可以选择在生产版本中公开其组件的文件名。出于安全原因，在生产环境中只暴露文件的basename。</span>
    propsToAttach<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__file</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>添加TreeShake代码</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//如果propsToAttach存在，添加else代码来Tree  shaking</span>
 <span class="token doc-comment comment">/**
  * 但我们可以通过 __PURE__
     注释来帮忙 terser。它给一个语句标记为没有副作用。就这样一个简单的改变就能够使下面的代码被 tree - shake 
     但仍然会有一些引入的问题，需要对其进行评估，因为它们产生了副作用。
     为了解决这个问题，我们需要在 package.json 中添加 &quot;sideEffects&quot; 属性。
     它类似于 __PURE__但是作用于模块的层面，而不是代码语句的层面。
     它表示的意思是(指&quot;sideEffects&quot; 属性)：“如果被标记为无副作用的模块没有被直接导出使用，
     打包工具会跳过进行模块的副作用分析评估。”。
 */</span>
 <span class="token comment">// finalize</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propsToAttach<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   code <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\n\nconst __exports__ = script;</span><span class="token template-punctuation string">`</span></span>
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
   code <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\n\nimport exportComponent from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>exportHelperPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
   code <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\nconst __exports__ = /*#__PURE__*/exportComponent(script, [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propsToAttach
     <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">])</span><span class="token template-punctuation string">`</span></span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>添加热重载代码</p><ol><li><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//添加热重载的代码</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>needsHotReload<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    code <span class="token operator">+=</span> <span class="token function">genHotReloadCode</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> templateRequest<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>attrsToQuery这个函数主要用于获取用户传入的参数并忽略用户传入的内置使用的属性const ignoreList = [&#39;id&#39;, &#39;index&#39;, &#39;src&#39;, &#39;type&#39;]</p></li></ol><p>总结：==vue-loader主要做的就是解析Vue文件，分别生成js css html，并分别进行相对应的处理。并做热更新和摇树的优化操作。==</p><h2 id="_2-vueloaderplugin" tabindex="-1"><a class="header-anchor" href="#_2-vueloaderplugin" aria-hidden="true">#</a> 2.VueLoaderPlugin</h2><p>在使用Vueloader的时候必须要在webpack.config.js的plugins中注册该插件。</p><p>这个插件的作用主要是将Vue分割出来的js html css都有对应的loader去处理。</p><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1074121761@qq.com">余瑞</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Notes/Vue/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.html" class="" aria-label="编译原理"><!--[--><!--]--> 编译原理 <!--[--><!--]--></a></span><span class="next"><a href="/Notes/Vue/Vue3%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0.html" class="" aria-label="Vue3异步更新"><!--[--><!--]--> Vue3异步更新 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-392a8034.js" defer></script>
  </body>
</html>
