import{usePageData as p,useSiteData as k}from"@vuepress/client";import{defineComponent as c,shallowRef as f,onMounted as v,watch as n,h as s,nextTick as h}from"vue";import{isString as w}from"vuepress-shared/client";import"artalk/dist/Artalk.css";import"../styles/artalk.scss";import{u as y}from"../comment-6705f8c9.js";var g=c({name:"Artalk",props:{darkmode:Boolean},setup:o=>{const t=y(),r=p(),d=k(),l=f();let e=null;const i=w(t.server),m=async()=>{await Promise.all([import("artalk"),new Promise(a=>{setTimeout(()=>{h().then(a)},t.delay||800)})]).then(([{default:a}])=>{const u=a;try{e=new u({useBackendConf:!1,site:d.value.title,pageTitle:r.value.title,...t,el:l.value,pageKey:r.value.path,darkMode:o.darkmode}),t.useBackendConf&&e.on("conf-loaded",()=>{e.setDarkMode(o.darkmode)})}catch{}})};return v(()=>{n(()=>r.value.path,async()=>{e==null||e.destroy(),await m()},{immediate:!0}),n(()=>o.darkmode,a=>{e==null||e.setDarkMode(a)})}),()=>i?s("div",{class:"artalk-wrapper"},s("div",{ref:l})):null}});export{g as default};
//# sourceMappingURL=Artalk.js.map
